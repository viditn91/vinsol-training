require_relative '../lib/product.rb'
require_relative '../lib/invoice.rb'
require_relative '../lib/tabularDisplay.rb'
#Creating an instance of Invoice i.e. a new biller
biller = Invoice.new
begin
  puts "Name of the product:"
  name = gets.chomp
  puts "Imported?:"
  import_status = gets.chomp
  puts "Exempted from sales tax?"
  exemption = gets.chomp
  puts "Price:"
  price = gets.chomp.to_f
  puts "Do you want to add more items to your list(y/n):"
  answer = gets.chomp
  #Adding product into the biller
  biller.add_product(Product.new(name, import_status, exemption, price))  
  break if answer =~ /^n$/i
end while 1
#Declaring headers, rows and footers as desired in the tabular display of bill
headers = %w{ Name Price Imported? Exempted Sales_Tax Taxed_Price } 
footers = ["Grand_Total", "=", biller.generate_billable_amount]
rows = []
biller.list_of_products.each do |product|
  rows << [product.name, product.price, product.import_status, product.exemption, biller.cal_sales_tax(product), biller.cal_taxed_price(product)]
end
#An instance of TabularDisplay; a bill which is generated by generate bill function
bill = TabularDisplay.new(headers, rows, footers)
bill.generate_bill